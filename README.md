# Tonalogy Interface

<p align="center">
  <img src="https://img.shields.io/badge/Next.js-14.0-black?style=for-the-badge&logo=next.js&logoColor=white" alt="Next.js" />
  <img src="https://img.shields.io/badge/TypeScript-5.2-3178C6?style=for-the-badge&logo=typescript&logoColor=white" alt="TypeScript" />
  <img src="https://img.shields.io/badge/Tailwind_CSS-3.3-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white" alt="Tailwind CSS" />
</p>

**Web-based Client for Harmonic Progression Analysis**

A modern, responsive frontend for the Tonalogy API that provides an intuitive interface for analyzing chord progressions using Kripke semantics and modal logic.

## üìú Project Context

This repository contains the official web frontend for the Tonalogy project. Its purpose is to provide a user-friendly graphical interface for interacting with the Tonalogy API. For a complete conceptual overview of the Tonalogy system, its theoretical foundations, and its academic goals, please refer to [the main project documentation](https://github.com/joabemorais/tonalogy).

## ‚ú® Core Functionality

This web application allows users to:

- **Submit harmonic progressions** for formal analysis with real-time validation
- **Receive and visualize** the diagrams generated by the backend, representing tonal paths and modulations
- **View detailed explanations** and semantic justifications for the tonal analysis provided by the API
- **Manage analysis history** with favorites and search functionality
- **Toggle between themes** (light/dark) for visualizations
- **Export diagrams** as PNG files

## üõ†Ô∏è Technology Stack

- **Framework:** Next.js 14 (App Router)
- **Language:** TypeScript
- **Styling:** Tailwind CSS + Shadcn/ui
- **State Management:** Zustand
- **API Communication:** Axios + TanStack Query
- **Form Handling:** React Hook Form + Zod
- **Icons:** Lucide React

## üöÄ Getting Started

### Prerequisites

- Node.js 18+ 
- npm or yarn or pnpm
- Running Tonalogy API instance

### Installation

1. **Clone and navigate to the project**
   ```bash
   cd tonalogy-interface
   ```

2. **Install dependencies**
   ```bash
   npm install
   # or
   yarn install
   # or
   pnpm install
   ```

3. **Set up environment variables**
   ```bash
   cp .env.example .env.local
   ```
   Edit `.env.local` and set the API URL:
   ```env
   NEXT_PUBLIC_API_URL=http://localhost:8000
   ```

4. **Start the development server**
   ```bash
   npm run dev
   # or
   yarn dev
   # or
   pnpm dev
   ```

5. **Open your browser**
   Navigate to [http://localhost:3000](http://localhost:3000)

### Production Build

```bash
npm run build && npm start
```

## üéØ Features

### üéµ Harmonic Analysis
- Interactive chord progression input with validation
- Real-time chord validation with suggestions
- Support for various chord notations (C, Cm, C7, etc.)
- Optional tonality testing constraints

### üìä Visualization
- PNG diagram generation with light/dark themes
- Downloadable visualization files
- Clear display of harmonic progressions and modulations

### üìö Analysis Results
- Detailed step-by-step explanations
- Formal rule applications and observations
- Tonal function identification
- Success/failure indicators with clear messaging

### üíæ History Management
- Persistent analysis history (localStorage)
- Favorite analyses with star ratings
- Recent analysis quick access
- Analysis metadata (timestamp, chords, results)

### üé® Modern UI/UX
- Responsive design for all screen sizes
- Dark/light theme support
- Smooth animations and transitions
- Accessible design patterns

## üìÅ Project Structure

```
tonalogy-interface/
‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ globals.css        # Global styles
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Root layout
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx           # Home page
‚îú‚îÄ‚îÄ components/             # React components
‚îÇ   ‚îú‚îÄ‚îÄ ui/                # Reusable UI components
‚îÇ   ‚îú‚îÄ‚îÄ harmonic-analyzer.tsx
‚îÇ   ‚îú‚îÄ‚îÄ chord-input.tsx
‚îÇ   ‚îú‚îÄ‚îÄ analysis-results.tsx
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ lib/                   # Utilities and configurations
‚îÇ   ‚îú‚îÄ‚îÄ api-client.ts      # API client
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts           # Utility functions
‚îú‚îÄ‚îÄ stores/                # Zustand state management
‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # Global stores
‚îú‚îÄ‚îÄ types/                 # TypeScript type definitions
‚îÇ   ‚îî‚îÄ‚îÄ index.ts           # Shared types
‚îî‚îÄ‚îÄ public/                # Static assets
```

## üèóÔ∏è Architecture

This frontend is designed as a **decoupled static site** that communicates directly with the Tonalogy API backend. The architecture supports:

- **Development**: Uses Next.js API routes as proxy to the backend for CORS handling
- **Production**: Builds to static files that make direct API calls to the deployed backend
- **Deployment**: Can be hosted on any static hosting service (Render Static Sites, Netlify, Vercel, etc.)

## üóÇÔ∏è Project Organization

The project follows a clean, organized structure:

- **`deploy/`** - All deployment configurations and scripts
- **`scripts/`** - Development setup and build scripts  
- **`components/`** - React UI components
- **`lib/`** - API client and utilities
- **`stores/`** - State management with Zustand

> **üìÅ See [`PROJECT_STRUCTURE.md`](./PROJECT_STRUCTURE.md) for detailed directory overview**

## üåê Deployment Options

### Development Build
```bash
npm run dev  # Uses proxy routes for local API communication
```

### Production Build
```bash
npm run build:static  # Generates static files for hosting
# or use the automated script:
./deploy/build-production.sh
```

The production build creates static HTML/CSS/JS files in the `out/` directory that can be deployed to any static hosting service.

> **üìÅ See [`deploy/`](./deploy/) directory for all deployment configurations and detailed instructions.**

## üîß Configuration

### Environment Variables

For **development**:
- `NEXT_PUBLIC_API_URL`: Tonalogy API base URL (default: http://localhost:8000)
- `TONALOGY_API_URL`: Internal proxy URL for development routes

For **production deployment**:
- `NEXT_PUBLIC_API_URL`: Your deployed API URL (e.g., https://your-api.onrender.com)

### Deployment-Specific Configuration

The project includes configuration files for popular hosting services:

- `render.yaml`: Configuration for Render Static Sites
- Static export optimized for CDN deployment
- Environment-aware API client that adapts to development vs production

### API Integration

The frontend automatically connects to the Tonalogy API and provides:
- Health check monitoring
- Automatic error handling
- Request/response caching
- Retry logic for failed requests

## üß™ Development

### Code Quality

```bash
npm run lint        # ESLint
npm run type-check  # TypeScript checking
```

### Component Development

The project uses a component-driven architecture with:
- Shadcn/ui for consistent design system
- TypeScript for type safety
- Tailwind CSS for styling
- Custom hooks for reusable logic

## üìù Usage Examples

### Basic Analysis
1. Enter chord progression (e.g., "C Am F G C")
2. Click "Analyze" to get tonal analysis
3. View step-by-step explanations
4. Optionally generate visualization

### Advanced Features
- Select specific tonalities to test
- Choose visualization theme
- Download generated diagrams
- Save analyses to favorites

## ü§ù Contributing

This project is part of an academic thesis. For contributions:

1. Follow the existing code style
2. Add TypeScript types for new features
3. Test with the Tonalogy API
4. Update documentation as needed

## üìÑ License

MIT License - see the Tonalogy project documentation for details.

## üîó Related Projects

- [Tonalogy API](https://github.com/joabemorais/tonalogy-api) - Backend analysis engine
- [Tonalogy CLI](https://github.com/joabemorais/tonalogy-cli) - Command-line interface
